(:summary    "Translate ANSI escape sequences into faces"
 :created    "1999"
 :updated    "2002"
 :license    "GPL-2"
 :authors    (("Alex Schroeder" . "alex@gnu.org"))
 :maintainer ("Alex Schroeder" . "alex@gnu.org")
 :provided   (ansi-color)
 :keywords   ("comm" "processes" "services" "terminals")
 :homepage   "http://www.emacswiki.org/AnsiColor"
 :wikipage   "http://www.emacswiki.org/AnsiColor"
 :commentary "\
This file provides a function that takes a string or a region
containing Select Graphic Rendition (SGR) control sequences (formerly
known as ANSI escape sequences) and tries to translate these into
faces.

This allows you to run ls --color=yes in shell-mode.  In order to
test this, proceed as follows:

1. start a shell: M-x shell
2. load this file: M-x load-library RET ansi-color RET
3. activate ansi-color: M-x ansi-color-for-comint-mode-on
4. test ls --color=yes in the *shell* buffer

Note that starting your shell from within Emacs might set the TERM
environment variable.  The new setting might disable the output of
SGR control sequences.  Using ls --color=yes forces ls to produce
these.

If you decide you like this, add the following to your .emacs file:

(autoload 'ansi-color-for-comint-mode-on \"ansi-color\" nil t)
(add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on)

SGR control sequences are defined in section 3.8.117 of the ECMA-48
standard (identical to ISO/IEC 6429), which is freely available as a
PDF file <URL:http://www.ecma.ch/ecma1/STAND/ECMA-048.HTM>.  The
\"Graphic Rendition Combination Mode (GRCM)\" implemented is
\"cumulative mode\" as defined in section 7.2.8.  Cumulative mode means
that whenever possible, SGR control sequences are combined (ie. blue
and bold).

The basic functions are:

`ansi-color-apply' to colorize a string containing SGR control
sequences.

`ansi-color-filter-apply' to filter SGR control sequences from a
string.

`ansi-color-apply-on-region' to colorize a region containing SGR
control sequences.

`ansi-color-filter-region' to filter SGR control sequences from a
region.

Bugs

Doesn't seem to work with older Emacs versions such as 20.2.

Thanks

Georges Brun-Cottan <gbruncot@emc.com> for improving ansi-color.el
substantially by adding the code needed to cope with arbitrary chunks
of output and the filter functions.

Markus Kuhn <Markus.Kuhn@cl.cam.ac.uk> for pointing me to ECMA-48.

Stefan Monnier <foo@acm.com> explaing obscure font-lock stuff and
code suggestions.")
